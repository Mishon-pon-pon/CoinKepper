!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class n{static GetCat(){return fetch("/category/exist",{method:"GET"}).then(t=>t.json())}static CreateCat(t){return fetch("/category/new",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json())}static DeleteCat(t){return fetch(`/category/delete/${t}`,{method:"delete"}).then(t=>t)}}let o=new Vue({el:"#CategoriesDivContent",data:{categories:[]}});function a(t){let e=[];for(let r=0;r<t.length;r++)e.push({name:t[r].Name,y:t[r].Value});return Highcharts.chart("container",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Ваши траты в процентах к общей сумме"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{name:"Вы потратили",colorByPoint:!0,data:e}]})}function i(t){return document.getElementById(t)}document.addEventListener("DOMContentLoaded",()=>{n.GetCat().then(t=>{t.forEach(t=>{t.input="input"}),o.categories=t,a(t)})}),i("addCategory").addEventListener("click",function(){let t=i("categoryName").value;n.CreateCat({categoryName:t}).then(e=>{!function(t,e,r){o.categories.push({CategoryId:t,Name:e,input:"input",Value:r})}(e.CategoryId,t,0),i("categoryName").value=""})}),i("body").addEventListener("click",t=>{if(t.target.getAttribute("categoryid")){let e=i("input"+t.target.getAttribute("categoryid")).value;(class{static AddSum(t){return fetch("/sum/new",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t)}}).AddSum({value:e,CategoryId:t.target.getAttribute("categoryid")}).then(t=>t),o.categories.forEach(e=>{e.CategoryId==t.target.getAttribute("categoryid")&&(e.Value=e.Value+Number(i("input"+t.target.getAttribute("categoryid")).value))}),a(o.categories)}}),i("body").addEventListener("click",t=>{t.target.getAttribute("inputCategory")&&(i("input"+t.target.getAttribute("inputCategory")).value="")}),i("body").addEventListener("click",t=>{if(t.target.getAttribute("button_number")){let e=t.target.getAttribute("button_number");n.DeleteCat(e).then(t=>{}),function(t){for(let e=0;e<o.categories.length;e++)o.categories[e].CategoryId==t&&o.categories.splice(e,1);a(o.categories)}(e)}})}]);